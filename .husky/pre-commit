# Run PHP linter
echo "Running PHP linter..."
./vendor/bin/pint --test

# Run PHPStan static analysis
echo "Running PHPStan static analysis..."
if [ -f "./vendor/bin/phpstan" ]; then
    ./vendor/bin/phpstan analyse --memory-limit=512M --no-progress
    if [ $? -ne 0 ]; then
        echo "‚ùå PHPStan found type errors. Please fix them before committing."
        echo "üí° Run 'composer run phpstan' to see detailed errors"
        exit 1
    fi
    echo "‚úÖ PHPStan analysis passed!"
else
    echo "‚ö†Ô∏è  PHPStan not installed, skipping static analysis"
fi

# Run lint-staged for JS/TS files  
npx lint-staged

echo "‚úÖ Pre-commit checks passed!"
